<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>第5回：AIチャットボットを作ろう！</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Noto Sans JP', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
            background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%);
            color: #2c3e50;
            overflow: hidden;
        }
        
        .slide-container {
            display: none;
            width: 100vw;
            height: 100vh;
            padding: 40px;
            animation: slideIn 0.5s ease-in-out;
        }
        
        .slide-container.active {
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
        }
        
        @keyframes slideIn {
            from { opacity: 0; transform: translateX(50px); }
            to { opacity: 1; transform: translateX(0); }
        }
        
        .slide-content {
            background: white;
            border-radius: 20px;
            padding: 60px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            max-width: 1200px;
            width: 100%;
            max-height: 80vh;
            overflow-y: auto;
        }
        
        h1 {
            color: #2c3e50;
            font-size: 3em;
            margin-bottom: 30px;
            text-align: center;
            border-bottom: 3px solid #34495e;
            padding-bottom: 20px;
            font-weight: 700;
        }
        
        h2 {
            color: #34495e;
            font-size: 2.2em;
            margin: 30px 0 20px;
            display: flex;
            align-items: center;
            gap: 15px;
            font-weight: 600;
        }
        
        h3 {
            color: #2c3e50;
            font-size: 1.8em;
            margin: 25px 0 15px;
            font-weight: 600;
        }
        
        .icon {
            font-size: 1.5em;
        }
        
        .feature-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 30px;
            margin: 30px 0;
        }
        
        .feature-card {
            background: linear-gradient(135deg, #ffd700 0%, #ff6b6b 100%);
            color: white;
            padding: 30px;
            border-radius: 15px;
            text-align: center;
            transition: transform 0.3s;
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        }
        
        .feature-card:hover {
            transform: translateY(-5px) scale(1.02);
        }
        
        .feature-icon {
            font-size: 3em;
            margin-bottom: 15px;
        }
        
        .code-box {
            background: #1e1e1e;
            color: #fff;
            padding: 25px;
            border-radius: 10px;
            margin: 20px 0;
            font-family: 'Courier New', monospace;
            font-size: 1.1em;
            overflow-x: auto;
            box-shadow: 0 5px 15px rgba(0,0,0,0.3);
            position: relative;
        }
        
        .command-prompt {
            background: #000;
            color: #0f0;
            padding: 20px;
            border-radius: 10px;
            margin: 20px 0;
            font-family: 'Consolas', monospace;
            font-size: 1.2em;
            position: relative;
            box-shadow: 0 5px 15px rgba(0,0,0,0.3);
        }
        
        .command-prompt::before {
            content: 'C:\\Users\\User>';
            color: #888;
            margin-right: 10px;
        }
        
        .project-showcase {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            border-radius: 15px;
            padding: 30px;
            margin: 30px 0;
            color: white;
        }
        
        .project-header {
            display: flex;
            align-items: center;
            gap: 20px;
            margin-bottom: 20px;
        }
        
        .project-icon {
            font-size: 3em;
        }
        
        .project-title {
            font-size: 1.8em;
            font-weight: bold;
        }
        
        .project-description {
            font-size: 1.1em;
            line-height: 1.6;
            margin: 15px 0;
        }
        
        .tech-stack {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
            margin-top: 20px;
        }
        
        .tech-badge {
            background: rgba(255,255,255,0.2);
            padding: 5px 15px;
            border-radius: 20px;
            font-size: 0.9em;
        }
        
        .timeline {
            position: relative;
            margin: 40px 0;
            padding-left: 50px;
        }
        
        .timeline::before {
            content: '';
            position: absolute;
            left: 20px;
            top: 0;
            bottom: 0;
            width: 3px;
            background: linear-gradient(to bottom, #ffd700, #ff6b6b);
        }
        
        .timeline-item {
            position: relative;
            margin: 30px 0;
            padding: 20px;
            background: #f8f9fa;
            border-radius: 10px;
        }
        
        .timeline-item::before {
            content: '';
            position: absolute;
            left: -35px;
            top: 30px;
            width: 15px;
            height: 15px;
            border-radius: 50%;
            background: #ff6b6b;
            border: 3px solid white;
        }
        
        .timeline-week {
            font-weight: bold;
            color: #ff6b6b;
            margin-bottom: 10px;
        }
        
        .diagram {
            display: flex;
            justify-content: space-around;
            align-items: center;
            margin: 40px 0;
            padding: 30px;
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            border-radius: 15px;
        }
        
        .diagram-item {
            text-align: center;
            flex: 1;
        }
        
        .diagram-icon {
            font-size: 4em;
            margin-bottom: 10px;
            color: #ff6b6b;
        }
        
        .arrow {
            font-size: 2em;
            color: #ffd700;
            margin: 0 20px;
            animation: pulse 2s infinite;
        }
        
        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.2); }
        }
        
        .step-list {
            counter-reset: step-counter;
            margin: 30px 0;
        }
        
        .step-item {
            counter-increment: step-counter;
            margin: 20px 0;
            padding: 20px;
            background: #f8f9fa;
            border-radius: 10px;
            position: relative;
            padding-left: 70px;
            font-size: 1.2em;
        }
        
        .step-item::before {
            content: counter(step-counter);
            position: absolute;
            left: 20px;
            top: 50%;
            transform: translateY(-50%);
            background: #ff6b6b;
            color: white;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            font-size: 1.2em;
        }
        
        .highlight {
            background: linear-gradient(120deg, #ffd700 0%, #ff6b6b 100%);
            color: white;
            padding: 5px 15px;
            border-radius: 20px;
            display: inline-block;
            margin: 10px 5px;
            font-weight: bold;
        }
        
        .navigation {
            position: fixed;
            bottom: 30px;
            right: 30px;
            display: flex;
            gap: 20px;
            z-index: 1000;
        }
        
        .nav-btn {
            background: #34495e;
            color: white;
            border: none;
            padding: 15px 30px;
            border-radius: 30px;
            cursor: pointer;
            font-size: 1.1em;
            font-weight: 500;
            transition: all 0.3s;
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        }
        
        .nav-btn:hover {
            background: #2c3e50;
            transform: translateY(-2px);
        }
        
        .nav-btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }
        
        .slide-number {
            position: fixed;
            top: 30px;
            right: 30px;
            background: rgba(255,255,255,0.9);
            padding: 10px 20px;
            border-radius: 20px;
            font-weight: bold;
            color: #34495e;
            font-size: 1.2em;
            font-weight: 600;
        }
        
        .emoji-large {
            font-size: 2em;
            vertical-align: middle;
            margin: 0 10px;
        }
        
        .warning-box {
            background: #fff3cd;
            border-left: 5px solid #ffc107;
            padding: 20px;
            margin: 20px 0;
            border-radius: 10px;
            font-size: 1.1em;
        }
        
        .success-box {
            background: #d4edda;
            border-left: 5px solid #28a745;
            padding: 20px;
            margin: 20px 0;
            border-radius: 10px;
            font-size: 1.1em;
        }
        
        .info-box {
            background: #d1ecf1;
            border-left: 5px solid #17a2b8;
            padding: 20px;
            margin: 20px 0;
            border-radius: 10px;
            font-size: 1.1em;
        }
        
        .certificate {
            background: linear-gradient(135deg, #ffd700 0%, #ff6b6b 100%);
            color: white;
            padding: 40px;
            border-radius: 20px;
            text-align: center;
            margin: 30px 0;
            box-shadow: 0 10px 30px rgba(0,0,0,0.3);
        }
        
        .certificate h2 {
            color: white;
            font-size: 2.5em;
            margin-bottom: 20px;
            justify-content: center;
        }
        
        .roadmap-card {
            background: white;
            border: 3px solid #ffd700;
            border-radius: 15px;
            padding: 25px;
            margin: 20px 0;
            transition: transform 0.3s;
        }
        
        .roadmap-card:hover {
            transform: translateX(10px);
        }
        
        .roadmap-level {
            display: inline-block;
            background: #ff6b6b;
            color: white;
            padding: 5px 15px;
            border-radius: 20px;
            font-weight: bold;
            margin-bottom: 10px;
        }
    </style>
</head>
<body>
    <div class="slide-number">
        <span id="currentSlide">1</span> / <span id="totalSlides">14</span>
    </div>

    <!-- スライド1: タイトル -->
    <div class="slide-container active">
        <div class="slide-content">
            <h1>🤖 第5回：AIチャットボットを作ろう！</h1>
            <div style="text-align: center; margin: 50px 0;">
                <div style="font-size: 6em; margin: 30px 0;">💬🧠📚</div>
                <h2 style="justify-content: center;">自分専用のAIアシスタント</h2>
                <p style="font-size: 1.5em; margin-top: 30px; color: #666;">
                    Claude Codeを使って、RAG機能付きチャットボットを作成しよう
                </p>
            </div>
        </div>
    </div>

    <!-- スライド2: 本日の内容 -->
    <div class="slide-container">
        <div class="slide-content">
            <h1>📋 本日のゴール</h1>
            <div class="step-list">
                <div class="step-item">
                    OpenAI APIを使ったチャットボットの基本実装
                </div>
                <div class="step-item">
                    RAG機能でローカルファイルから回答生成
                </div>
                <div class="step-item">
                    PDFやテキストファイルの読み込み機能
                </div>
                <div class="step-item">
                    Webインターフェースの作成
                </div>
            </div>
            <div class="success-box">
                🎯 完成イメージ：自分の資料を学習したAIアシスタントが質問に答えてくれる！
            </div>
        </div>
    </div>

    <!-- スライド3: チャットボットとRAGとは -->
    <div class="slide-container">
        <div class="slide-content">
            <h1>🤔 チャットボット＆RAGとは？</h1>
            <div class="feature-grid">
                <div class="feature-card">
                    <div class="feature-icon">💬</div>
                    <h3>チャットボット</h3>
                    <p style="font-size: 0.9em;">AIと対話形式でやり取りできるプログラム</p>
                </div>
                <div class="feature-card" style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);">
                    <div class="feature-icon">📚</div>
                    <h3>RAG機能</h3>
                    <p style="font-size: 0.9em;">Retrieval-Augmented Generation<br>文書から情報を取得して回答</p>
                </div>
            </div>
            
            <div class="info-box">
                💡 <strong>RAGの仕組み</strong>
                <ol style="margin-top: 10px;">
                    <li>ユーザーが質問する</li>
                    <li>関連する文書を検索</li>
                    <li>文書の内容を基にAIが回答生成</li>
                </ol>
            </div>
            
            <div class="success-box">
                🎯 メリット：最新情報や社内文書など、AIが知らない情報でも回答可能！
            </div>
        </div>
    </div>

    <!-- スライド4: 必要な準備 -->
    <div class="slide-container">
        <div class="slide-content">
            <h1>🛠️ 必要な準備</h1>
            <div class="step-list">
                <div class="step-item">
                    <strong>Claude Code</strong> - インストール済み（前提）
                </div>
                <div class="step-item">
                    <strong>Node.js</strong> - JavaScriptランタイム
                </div>
                <div class="step-item">
                    <strong>OpenAI APIキー</strong> - チャット機能用
                </div>
                <div class="step-item">
                    <strong>テキストエディタ</strong> - VS Code推奨
                </div>
            </div>
            
            <div class="warning-box">
                ⚠️ <strong>APIキーの取得方法</strong>
                <ol style="margin-top: 10px;">
                    <li>OpenAIのサイトでアカウント作成</li>
                    <li>API Keysページで新規キー生成</li>
                    <li>キーは一度しか表示されないので必ず保存</li>
                </ol>
            </div>
            
            <div class="info-box">
                💡 APIキーは環境変数（.env）で管理します（セキュリティ重要！）
            </div>
        </div>
    </div>

    <!-- スライド5: プロジェクトセットアップ -->
    <div class="slide-container">
        <div class="slide-content">
            <h1>🚀 プロジェクトのセットアップ</h1>
            <h2><span class="icon">💬</span>Claude Codeへ気軽にお願い！</h2>
            <div class="code-box">
「こんにちは！チャットボット作りたいんですが、手伝ってもらえますか？

やりたいこと：
🤖 自分の資料（PDFやテキスト）を読み込んで、
   それを元に質問に答えてくれるチャットボット

条件：
- WindowsのVSCodeで開発
- OpenAI APIを使いたい（キーは持ってます）
- 初心者でも分かりやすく
- Webブラウザで使えるようにしたい

技術的なことは全然分からないので、
どんなファイルが必要で、どう作ればいいか
一から教えてください！」
            </div>
            
            <div class="success-box">
                💡 Claude Codeが技術選択から丁寧にサポートしてくれます！
            </div>
        </div>
    </div>

    <!-- スライド6: 環境変数の設定 -->
    <div class="slide-container">
        <div class="slide-content">
            <h1>🔐 環境変数の設定</h1>
            <h2><span class="icon">📝</span>.envファイルの作成</h2>
            <div class="code-box">
# .env
OPENAI_API_KEY=sk-proj-xxxxxxxxxxxxx
PORT=3000
            </div>
            
            <div class="warning-box">
                ⚠️ <strong>重要：セキュリティ対策</strong>
                <ul style="margin-top: 10px;">
                    <li>.envファイルは絶対にGitHubにアップしない</li>
                    <li>.gitignoreに必ず.envを追加</li>
                    <li>APIキーは他人と共有しない</li>
                </ul>
            </div>
            
            <h3>.gitignoreの設定</h3>
            <div class="code-box">
node_modules/
.env
*.log
.DS_Store
            </div>
            
            <div class="info-box">
                💡 環境変数はprocess.env.OPENAI_API_KEYでアクセスできます
            </div>
        </div>
    </div>

    <!-- スライド7: 基本的なチャット機能 -->
    <div class="slide-container">
        <div class="slide-content">
            <h1>💬 基本的なチャット機能をお願い</h1>
            <h2><span class="icon">🗣️</span>Claude Codeへの続きの依頼</h2>
            <div class="code-box">
「プロジェクトができたので、次は基本的なチャット機能を作ってください！

具体的には：
📝 ユーザーがメッセージを入力
🤖 OpenAI APIで返答を生成
💬 チャット形式で表示

まずはRAG機能なしで、
普通にChatGPTみたいに会話できるものから始めたいです。

サーバー側とWebページ、両方お願いします！」
            </div>
            
            <div class="info-box">
                💡 Claude Codeが必要なコードを全部書いてくれます！
            </div>
        </div>
    </div>

    <!-- スライド8: フロントエンドUI -->
    <div class="slide-container">
        <div class="slide-content">
            <h1>🎨 動作確認してみよう！</h1>
            <h2><span class="icon">🚀</span>実際に動かしてみる</h2>
            <div class="code-box">
「チャット機能ができたら、動作確認したいです！

手順を教えてください：
1️⃣ サーバーの起動方法
2️⃣ ブラウザでのアクセス方法
3️⃣ 実際にメッセージを送って確認

もしエラーが出たときの
対処法も教えてもらえると嬉しいです！」
            </div>
            
            <div class="success-box">
                🎯 Claude Codeが動作確認のサポートもしてくれます！
            </div>
        </div>
    </div>

    <!-- スライド9: RAG機能の実装 -->
    <div class="slide-container">
        <div class="slide-content">
            <h1>📚 いよいよRAG機能を追加！</h1>
            <h2><span class="icon">💭</span>Claude Codeへお願いしよう</h2>
            <div class="code-box">
「チャットボットが動いたので、今度はRAG機能を追加したいです！

やりたいこと：
📂 documentsフォルダを作って、そこにテキストファイルやPDFを置く
🔍 ユーザーの質問に関連するファイルを自動で検索
🤖 見つけた情報を元にAIが回答

例えば：
- 会社のマニュアル.pdf
- プロジェクトの資料.txt
- 議事録.docx

これらを読み込んで、
"昨日の会議で決まったことは？"
みたいな質問に答えてもらいたいです。

どうやって実装すればいいでしょうか？」
            </div>
            
            <div class="info-box">
                💡 Claude Codeがファイル読み込みから検索まで全部作ってくれます！
            </div>
        </div>
    </div>

    <!-- スライド10: 実際にテストしてみよう -->
    <div class="slide-container">
        <div class="slide-content">
            <h1>🧪 実際にテストしてみよう！</h1>
            <h2><span class="icon">📝</span>Claude Codeへテスト依頼</h2>
            <div class="code-box">
「RAG機能ができたら、実際にテストしたいです！

テスト手順：
1️⃣ documentsフォルダにサンプルファイルを置く
   - 自己紹介.txt
   - 趣味について.pdf
   - プロジェクト概要.docx など

2️⃣ "私の趣味は何ですか？"と質問してみる
3️⃣ ファイルの内容を元に回答されるか確認

もしうまく動かない場合の
デバッグ方法も教えてください！」
            </div>
            
            <div class="success-box">
                🎯 Claude Codeがテスト方法とデバッグも教えてくれます！
            </div>
            
            <div class="info-box">
                💡 実際のファイルで動作確認することで完成度アップ！
            </div>
        </div>
    </div>

    <!-- スライド11: RAG統合とプロンプト設計 -->
    <div class="slide-container">
        <div class="slide-content">
            <h1>🎉 さらなる改善をお願い！</h1>
            <h2><span class="icon">💡</span>Claude Codeへの最終依頼</h2>
            <div class="code-box">
「チャットボットがうまく動いたので、もう少し改善したいです！

追加したい機能：
🎨 チャット画面をもっとかっこよく
📱 スマホでも使いやすいように
💾 会話履歴を保存機能
🔍 どのファイルから情報を取得したか表示
⚡ 回答速度の向上

どれか一つでもいいので、
やりやすそうなものから教えてください！

あと、このチャットボットを
他の人にも使ってもらうには
どうすればいいでしょうか？」
            </div>
            
            <div class="success-box">
                🎯 Claude Codeが更なる機能向上をサポート！
            </div>
        </div>
    </div>

    <!-- スライド12: 動作テストとデバッグ -->
    <div class="slide-container">
        <div class="slide-content">
            <h1>🧪 動作テストとデバッグ</h1>
            
            <div class="step-list">
                <div class="step-item">
                    <strong>サーバー起動</strong><br>
                    <code>node server.js</code> でサーバーを起動
                </div>
                <div class="step-item">
                    <strong>ブラウザアクセス</strong><br>
                    <code>http://localhost:3000</code> を開く
                </div>
                <div class="step-item">
                    <strong>テスト質問</strong><br>
                    documentsフォルダ内の内容について質問
                </div>
                <div class="step-item">
                    <strong>デバッグ</strong><br>
                    console.logで処理の流れを確認
                </div>
            </div>
            
            <div class="warning-box">
                ⚠️ <strong>よくあるエラー</strong>
                <ul style="margin-top: 10px;">
                    <li>APIキーが設定されていない → .envファイル確認</li>
                    <li>ポートが使用中 → 別のポート番号を指定</li>
                    <li>CORS エラー → express.static設定を追加</li>
                </ul>
            </div>
        </div>
    </div>

    <!-- スライド13: 発展的な機能追加 -->
    <div class="slide-container">
        <div class="slide-content">
            <h1>🚀 発展的な機能追加</h1>
            
            <div class="feature-grid">
                <div class="feature-card">
                    <div class="feature-icon">💾</div>
                    <h3>会話履歴保存</h3>
                    <p style="font-size: 0.9em;">データベースに履歴を保存して過去の会話を参照</p>
                </div>
                <div class="feature-card" style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);">
                    <div class="feature-icon">🔍</div>
                    <h3>ベクトル検索</h3>
                    <p style="font-size: 0.9em;">Embeddingを使った高度な文書検索</p>
                </div>
                <div class="feature-card">
                    <div class="feature-icon">🌐</div>
                    <h3>多言語対応</h3>
                    <p style="font-size: 0.9em;">英語・中国語など複数言語での質問応答</p>
                </div>
            </div>
            
            <div class="info-box">
                💡 <strong>更なる改善アイデア</strong>
                <ul style="margin-top: 10px;">
                    <li>音声入力・音声読み上げ機能</li>
                    <li>画像やグラフの解析機能</li>
                    <li>複数のAIモデル切り替え（GPT-4、Claude等）</li>
                    <li>Webサイトクローリング機能</li>
                </ul>
            </div>
        </div>
    </div>

    <!-- スライド14: 完成とまとめ -->
    <div class="slide-container">
        <div class="slide-content">
            <h1>🎊 完成おめでとう！</h1>
            
            <div class="certificate">
                <h2>🤖 AIチャットボット完成 🤖</h2>
                <div style="font-size: 1.3em; margin: 30px 0;">
                    RAG機能付きチャットボットが完成しました！
                </div>
            </div>
            
            <div class="success-box">
                <strong>今日作ったもの</strong>
                <ul style="margin-top: 10px;">
                    <li>✅ OpenAI APIを使ったチャット機能</li>
                    <li>✅ ローカルファイルを読み込むRAG機能</li>
                    <li>✅ PDF・テキストファイル対応</li>
                    <li>✅ Webインターフェース</li>
                    <li>✅ セキュアな環境変数管理</li>
                </ul>
            </div>
            
            <div class="info-box">
                <strong>次のステップ</strong>
                <ul style="margin-top: 10px;">
                    <li>📚 自分の資料を追加してカスタマイズ</li>
                    <li>🎨 UIデザインの改善</li>
                    <li>☁️ クラウドへのデプロイ</li>
                    <li>🔧 新機能の追加</li>
                </ul>
            </div>
            
            <div style="text-align: center; margin-top: 40px;">
                <p style="font-size: 2em; font-weight: bold; color: #ff6b6b;">
                    素晴らしいチャットボットを<br>作ってくれてありがとう！
                </p>
            </div>
        </div>
    </div>

    <div class="navigation">
        <button class="nav-btn" id="prevBtn" onclick="changeSlide(-1)">← 前へ</button>
        <button class="nav-btn" id="nextBtn" onclick="changeSlide(1)">次へ →</button>
        <button class="nav-btn" id="backToDashboard" onclick="backToDashboard()" style="display: none; background: #28a745;">📚 ダッシュボードに戻る</button>
    </div>

    <script>
        let currentSlide = 1;
        // スライド数を自動検出
        const totalSlides = document.getElementsByClassName('slide-container').length;

        function showSlide(n) {
            const slides = document.getElementsByClassName('slide-container');
            
            if (n > totalSlides) currentSlide = totalSlides;
            if (n < 1) currentSlide = 1;
            
            for (let i = 0; i < slides.length; i++) {
                slides[i].classList.remove('active');
            }
            
            slides[currentSlide - 1].classList.add('active');
            
            document.getElementById('currentSlide').textContent = currentSlide;
            document.getElementById('prevBtn').disabled = currentSlide === 1;
            document.getElementById('nextBtn').disabled = currentSlide === totalSlides;
            
            // 最後のスライドでダッシュボードに戻るボタンを表示
            const backBtn = document.getElementById('backToDashboard');
            if (currentSlide === totalSlides) {
                backBtn.style.display = 'inline-block';
            } else {
                backBtn.style.display = 'none';
            }
                    
            // 進捗をリアルタイム更新
            updateProgress();
        }

        

        function changeSlide(n) {
            currentSlide += n;
            showSlide(currentSlide);
        }

        
        
        function updateProgress() {
            const token = localStorage.getItem('token');
            if (token) {
                const status = currentSlide === totalSlides ? 'completed' : 'in_progress';
                fetch('/api/progress', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                        'Authorization': `Bearer ${token}`
                    },
                    body: JSON.stringify({
                        lesson_id: 5,
                        status: status,
                        last_slide: currentSlide,
                        time_spent: Math.floor(Date.now() / 1000 - sessionStart)
                    })
                }).catch(error => {
                    console.log('進捗更新エラー:', error);
                });
            }
        }
function backToDashboard() {
            // レッスン完了を記録
            const token = localStorage.getItem('token');
            if (token) {
                fetch('/api/progress', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                        'Authorization': `Bearer ${token}`
                    },
                    body: JSON.stringify({
                        lesson_id: 5,
                        status: 'completed',
                        last_slide: totalSlides,
                        time_spent: Math.floor(Date.now() / 1000 - sessionStart)
                    })
                }).then(() => {
                    // ダッシュボードに戻る
                    window.location.href = '/student-dashboard.html';
                }).catch(() => {
                    // エラーでもダッシュボードに戻る
                    window.location.href = '/student-dashboard.html';
                });
            } else {
                window.location.href = '/login.html';
            }
        }
// キーボードナビゲーション
        document.addEventListener('keydown', function(e) {
            if (e.key === 'ArrowLeft') changeSlide(-1);
            if (e.key === 'ArrowRight') changeSlide(1);
        });

        // セッション開始時刻を記録
        const sessionStart = Math.floor(Date.now() / 1000);

        // 初期表示
        showSlide(1);
    </script>
    
    <footer style="position: fixed; bottom: 5px; right: 10px; font-size: 0.6em; color: #ccc; z-index: 1000;">
        © 2025 AI研修法人
    </footer>
</body>
</html>